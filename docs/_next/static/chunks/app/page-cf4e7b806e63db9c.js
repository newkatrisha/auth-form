(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4772:(e,s,a)=>{Promise.resolve().then(a.bind(a,6538))},6538:(e,s,a)=>{"use strict";a.d(s,{default:()=>l});var i=a(5155),n=a(2115);function l(){let[e,s]=(0,n.useState)({email:"",password:"",isLogin:!0}),[a,l]=(0,n.useState)(!1),[r,t]=(0,n.useState)(null),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),h=()=>e.email&&e.email.includes("@")?!!e.password&&!(e.password.length<6)||(t("Password must be at least 6 characters"),!1):(t("Please enter a valid email address"),!1),m=e=>{let{id:a,value:i}=e.target;s(e=>({...e,[a]:i}))},p=async s=>{if(s.preventDefault(),t(null),h()){l(!0);try{let s=await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,isLogin:e.isLogin})}),a=await s.json();if(!s.ok)throw Error(a.error||"An error occurred");u(a.user),c(!0)}catch(e){t(e instanceof Error?e.message:"An unexpected error occurred")}finally{l(!1)}}};return o&&d?(0,i.jsx)("div",{className:"auth-container",children:(0,i.jsxs)("div",{className:"auth-form success-message",children:[(0,i.jsx)("div",{className:"success-icon",children:"✓"}),(0,i.jsx)("h2",{children:e.isLogin?"Login Successful!":"Account Created!"}),e.isLogin?(0,i.jsxs)("p",{children:["Welcome back, ",d.name]}):null,(0,i.jsxs)("button",{className:"auth-button",onClick:()=>{c(!1),u(null),s({email:"",password:"",isLogin:e.isLogin})},children:["Back to ",e.isLogin?"Login":"Sign Up"]})]})}):(0,i.jsx)("div",{className:"auth-container",children:(0,i.jsxs)("div",{className:"auth-form",children:[(0,i.jsx)("h1",{children:e.isLogin?"Welcome Back":"Create Account"}),(0,i.jsx)("p",{className:"auth-subtitle",children:e.isLogin?"Enter your credentials to access your account":"Fill in the form below to create your account"}),(0,i.jsxs)("form",{onSubmit:p,children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"email",children:"Email"}),(0,i.jsx)("div",{className:"input-container",children:(0,i.jsx)("input",{id:"email",type:"email",value:e.email,onChange:m,placeholder:"your@email.com",disabled:a,required:!0})})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"password",children:"Password"}),(0,i.jsx)("div",{className:"input-container",children:(0,i.jsx)("input",{id:"password",type:"password",value:e.password,onChange:m,placeholder:"••••••••",disabled:a,required:!0})})]}),r?(0,i.jsx)("div",{className:"error-message",children:r}):null,(0,i.jsx)("button",{type:"submit",className:"auth-button",disabled:a,children:a?(0,i.jsx)("span",{className:"loading-spinner"}):e.isLogin?"Log In":"Sign Up"})]}),(0,i.jsx)("div",{className:"auth-switch",children:(0,i.jsxs)("p",{children:[e.isLogin?"Don't have an account?":"Already have an account?",(0,i.jsx)("button",{type:"button",className:"switch-button",onClick:()=>{s(e=>({...e,isLogin:!e.isLogin})),t(null),c(!1)},disabled:a,children:e.isLogin?"Sign Up":"Log In"})]})})]})})}a(8770)},8770:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[803,441,517,358],()=>s(4772)),_N_E=e.O()}]);